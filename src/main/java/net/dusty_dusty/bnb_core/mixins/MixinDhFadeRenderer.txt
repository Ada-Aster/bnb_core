package net.dusty_dusty.dh_dimension_switch.mixins;

import com.seibel.distanthorizons.core.render.renderer.DhFadeRenderer;
import com.seibel.distanthorizons.core.render.renderer.shaders.FadeApplyShader;
import com.seibel.distanthorizons.core.render.renderer.shaders.DhFadeShader;
import org.spongepowered.asm.mixin.Mixin;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Redirect;

@Mixin( DhFadeRenderer.class )
public class MixinDhFadeRenderer {

    @Redirect( method = "render", at = @At(
            value = "INVOKE",
            target = "Lcom/seibel/distanthorizons/core/render/renderer/shaders/DhFadeShader;render(F)V"
        ), remap = false
    )
    void renderProxy(
            DhFadeShader instance,
            float v
    ){
        if ( LodRenderChecker.shouldRender() ) instance.render( v );
    }

    @Redirect( method = "render", at = @At(
            value = "INVOKE",
            target = "Lcom/seibel/distanthorizons/core/render/renderer/shaders/FadeApplyShader;render(F)V"
        ), remap = false
    )
    void applyRenderProxy(
            FadeApplyShader instance,
            float v
    ){
        if ( LodRenderChecker.shouldRender() ) instance.render( v );
    }
}
